const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/charts-BaPK5s1M.js","assets/react-vendor-BVAhLato.js"])))=>i.map(i=>d[i]);
import{c as e,f as a,t,R as s,U as r,Z as l,D as i,C as d,d as o,a as n,b as c,i as m,_ as x}from"./index-BaJa-ZGP.js";import{j as h}from"./ui-vendor-D6QdPKSZ.js";import{a as p}from"./react-vendor-BVAhLato.js";import{T as j}from"./trending-up-BeW66eMD.js";import{A as g}from"./activity-7-J4c3C7.js";import"./charts-BaPK5s1M.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u=e("arrow-down-right",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),b=e("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),f=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.LineChart}))),N=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.AreaChart}))),v=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.BarChart}))),_=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.Bar}))),y=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.Line}))),w=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.Area}))),k=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.XAxis}))),E=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.YAxis}))),R=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.CartesianGrid}))),L=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.Tooltip})));p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.Legend})));const S=p.lazy(()=>x(()=>import("./charts-BaPK5s1M.js").then(e=>e.i),__vite__mapDeps([0,1])).then(e=>({default:e.ResponsiveContainer}))),D={sessions:{label:"Sessões",unit:"",color:"#10b981",icon:g,gradient:["#10b981","#059669"]},revenue:{label:"Receita",unit:"R$",color:"#22c55e",icon:i,gradient:["#22c55e","#16a34a"]},energy:{label:"Energia",unit:"kWh",color:"#fbbf24",icon:l,gradient:["#fbbf24","#f59e0b"]},users:{label:"Usuários Ativos",unit:"",color:"#3b82f6",icon:r,gradient:["#3b82f6","#2563eb"]}},A=[{value:"7d",label:"Últimos 7 dias"},{value:"30d",label:"Últimos 30 dias"},{value:"90d",label:"Últimos 90 dias"}],T=()=>{const[e,r]=p.useState([]),[x,T]=p.useState(null),[z,C]=p.useState("revenue"),[O,F]=p.useState("30d"),[P,I]=p.useState("area"),[B,V]=p.useState(!0),[$,W]=p.useState(!1);p.useEffect(()=>{M()},[O]);const M=async()=>{V(!0);try{const[e,t]=await Promise.all([a.get("/performance-data"),a.get("/dashboard-stats")]);if(e.ok){const a=await e.json(),t="7d"===O?7:"30d"===O?30:90,s=a.slice(-t);r(s)}if(t.ok){const e=await t.json();T(e)}}catch(e){t.error("Erro ao buscar dados de performance"),r([])}finally{V(!1)}},K=a=>{if(!e||0===e.length)return{total:0,avg:0,growth:0,trend:"up"};const t=e.reduce((e,t)=>e+parseFloat(t[a].toString()),0),s=t/e.length,r=Math.floor(e.length/2),l=e.slice(0,r).reduce((e,t)=>e+parseFloat(t[a].toString()),0),i=e.slice(r).reduce((e,t)=>e+parseFloat(t[a].toString()),0),d=l>0?(i-l)/l*100:0;return{total:t,avg:s,growth:d,trend:d>=0?"up":"down"}},G=(e,a)=>{const t=D[a],s=e??0;return"revenue"===a?`${t.unit} ${s.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"energy"===a?`${s.toLocaleString("pt-BR",{minimumFractionDigits:1,maximumFractionDigits:1})} ${t.unit}`:s.toLocaleString("pt-BR")},U=e.map(e=>({date:new Date(e.date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),sessions:e.sessions,revenue:e.revenue,energy:e.energy,users:e.users})),H=D[z];return B?h.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"}),h.jsx("p",{className:"text-emerald-300/60",children:"Carregando indicadores..."})]}):h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsxs("div",{children:[h.jsxs("h1",{className:"text-3xl font-bold text-emerald-50 flex items-center gap-3",children:[h.jsx(j,{className:"w-8 h-8 text-emerald-400"}),"Indicadores de Performance"]}),h.jsx("p",{className:"text-emerald-300/60 mt-1",children:"Análise detalhada das métricas do sistema"})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("button",{onClick:async()=>{W(!0),await M(),W(!1),t.success("Dados atualizados!")},disabled:$,className:"flex items-center gap-2 px-4 py-2 bg-emerald-900/30 hover:bg-emerald-800/50 border border-emerald-800/30 rounded-lg text-emerald-300 transition-all",children:[h.jsx(s,{className:"w-4 h-4 "+($?"animate-spin":"")}),"Atualizar"]})})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:Object.keys(D).map(e=>{const a=D[e],t=K(e),s=a.icon,r=z===e;return h.jsx(d,{className:"cursor-pointer transition-all duration-300 "+(r?"bg-gradient-to-br from-emerald-600/30 to-emerald-800/20 border-emerald-500 shadow-lg shadow-emerald-900/30":"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30 hover:border-emerald-600/50 hover:shadow-lg hover:shadow-emerald-900/20"),onClick:()=>C(e),children:h.jsx(o,{className:"p-5",children:h.jsx("div",{className:"flex items-start justify-between",children:h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"p-2 rounded-lg "+(r?"bg-emerald-500/30":"bg-emerald-900/50"),children:h.jsx(s,{className:"w-4 h-4 text-emerald-400"})}),h.jsx("span",{className:"text-sm text-emerald-300/70 font-medium",children:a.label})]}),h.jsx("p",{className:"text-2xl font-bold text-emerald-50",children:G(t.total,e)}),h.jsxs("div",{className:"flex items-center gap-2",children:["up"===t.trend?h.jsxs("div",{className:"flex items-center gap-1 text-emerald-400",children:[h.jsx(b,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-sm font-medium",children:["+",Math.abs(t.growth).toFixed(1),"%"]})]}):h.jsxs("div",{className:"flex items-center gap-1 text-red-400",children:[h.jsx(u,{className:"w-4 h-4"}),h.jsxs("span",{className:"text-sm font-medium",children:[t.growth.toFixed(1),"%"]})]}),h.jsx("span",{className:"text-xs text-emerald-300/50",children:"vs período anterior"})]})]})})})},e)})}),h.jsxs(d,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30 backdrop-blur-sm shadow-2xl shadow-emerald-900/20",children:[h.jsx(n,{className:"border-b border-emerald-800/30 pb-4",children:h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[h.jsxs("div",{children:[h.jsxs(c,{className:"text-xl text-emerald-50 flex items-center gap-2",children:[h.jsx(H.icon,{className:"w-5 h-5 text-emerald-400"}),H.label," ao Longo do Tempo"]}),h.jsxs("p",{className:"text-sm text-emerald-300/60 mt-1",children:["Média diária: ",G(K(z).avg,z)]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex items-center gap-1 p-1 bg-emerald-950/50 rounded-lg border border-emerald-800/30",children:A.map(e=>h.jsx("button",{onClick:()=>F(e.value),className:"px-3 py-1.5 rounded-md text-sm font-medium transition-all "+(O===e.value?"bg-emerald-600 text-white":"text-emerald-300/70 hover:text-emerald-200"),children:e.label.replace("Últimos ","")},e.value))}),h.jsxs("div",{className:"flex items-center gap-1 p-1 bg-emerald-950/50 rounded-lg border border-emerald-800/30",children:[h.jsx("button",{onClick:()=>I("area"),className:"p-2 rounded-md transition-all "+("area"===P?"bg-emerald-600 text-white":"text-emerald-300/70 hover:text-emerald-200"),title:"Área",children:h.jsx(g,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>I("bar"),className:"p-2 rounded-md transition-all "+("bar"===P?"bg-emerald-600 text-white":"text-emerald-300/70 hover:text-emerald-200"),title:"Barras",children:h.jsx(m,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>I("line"),className:"p-2 rounded-md transition-all "+("line"===P?"bg-emerald-600 text-white":"text-emerald-300/70 hover:text-emerald-200"),title:"Linha",children:h.jsx(j,{className:"w-4 h-4"})})]})]})]})}),h.jsx(o,{className:"pt-6",children:h.jsx(p.Suspense,{fallback:h.jsx("div",{className:"h-[400px] bg-emerald-900/20 animate-pulse rounded-lg"}),children:h.jsx(S,{width:"100%",height:400,children:(()=>{const e={data:U,margin:{top:10,right:30,left:0,bottom:0}},a=h.jsxs(h.Fragment,{children:[h.jsx(R,{strokeDasharray:"3 3",stroke:"#27272a",vertical:!1}),h.jsx(k,{dataKey:"date",stroke:"#71717a",tick:{fill:"#a1a1aa",fontSize:12},axisLine:{stroke:"#27272a"}}),h.jsx(E,{stroke:"#71717a",tick:{fill:"#a1a1aa",fontSize:12},axisLine:{stroke:"#27272a"},tickFormatter:e=>"revenue"===z?`R$${e}`:"energy"===z?`${e}kWh`:e}),h.jsx(L,{contentStyle:{backgroundColor:"#18181b",border:"1px solid #27272a",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.5)"},labelStyle:{color:"#a1a1aa",marginBottom:"8px"},itemStyle:{color:H.color},formatter:e=>[G(e,z),H.label]})]});switch(P){case"bar":return h.jsxs(v,{...e,children:[a,h.jsx(_,{dataKey:z,fill:H.color,radius:[4,4,0,0],maxBarSize:50})]});case"line":return h.jsxs(f,{...e,children:[a,h.jsx(y,{type:"monotone",dataKey:z,stroke:H.color,strokeWidth:3,dot:{fill:H.color,r:4,strokeWidth:2,stroke:"#18181b"},activeDot:{r:6,strokeWidth:2,stroke:"#18181b"}})]});default:return h.jsxs(N,{...e,children:[a,h.jsx("defs",{children:h.jsxs("linearGradient",{id:`gradient-${z}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[h.jsx("stop",{offset:"5%",stopColor:H.gradient[0],stopOpacity:.4}),h.jsx("stop",{offset:"95%",stopColor:H.gradient[1],stopOpacity:0})]})}),h.jsx(w,{type:"monotone",dataKey:z,stroke:H.color,strokeWidth:3,fill:`url(#gradient-${z})`,dot:{fill:H.color,r:4,strokeWidth:2,stroke:"#18181b"},activeDot:{r:6,strokeWidth:2,stroke:"#18181b"}})]})}})()})})})]}),x&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[h.jsx(d,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:h.jsx(o,{className:"p-5",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-emerald-300/70",children:"Total de Transações"}),h.jsx("p",{className:"text-2xl font-bold text-emerald-50 mt-1",children:(x.totalTransactions??0).toLocaleString("pt-BR")})]}),h.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:h.jsx(g,{className:"w-6 h-6 text-emerald-400"})})]})})}),h.jsx(d,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:h.jsx(o,{className:"p-5",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-emerald-300/70",children:"Receita Total"}),h.jsxs("p",{className:"text-2xl font-bold text-emerald-50 mt-1",children:["R$ ",(x.totalRevenue??0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),h.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:h.jsx(i,{className:"w-6 h-6 text-emerald-400"})})]})})}),h.jsx(d,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:h.jsx(o,{className:"p-5",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm text-emerald-300/70",children:"Energia Fornecida"}),h.jsxs("p",{className:"text-2xl font-bold text-emerald-50 mt-1",children:[(x.totalEnergy??0).toLocaleString("pt-BR",{minimumFractionDigits:1})," kWh"]})]}),h.jsx("div",{className:"p-3 bg-amber-500/20 rounded-xl",children:h.jsx(l,{className:"w-6 h-6 text-amber-400"})})]})})})]})]})};export{T as Indicators};
