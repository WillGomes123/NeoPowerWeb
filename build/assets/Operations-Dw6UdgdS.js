import{j as e}from"./ui-vendor-D6QdPKSZ.js";import{a}from"./react-vendor-BVAhLato.js";import{c as s,f as r,R as t,B as i,C as c,d as n,Z as l,a as o,b as d,l as m,S as h,k as x,m as g,g as u,t as p,h as j,I as v}from"./index-BaJa-ZGP.js";import{T as N,a as f,b,c as y}from"./tabs-Dd5MU0P_.js";import{S as C,a as w,b as I,c as k,d as S}from"./select-DGz8aZRk.js";import{D as T,a as z,b as D,c as L,d as E,e as F}from"./dialog-BkZWeYAN.js";import{B as P}from"./badge-CIrDOdUW.js";import{W as M,a as R}from"./wifi-CvHp-qHO.js";import{C as A}from"./circle-check-BUKjHuaz.js";import{A as H}from"./activity-7-J4c3C7.js";import{C as V}from"./circle-x-BaVF9_aR.js";import{S as O}from"./send-BrF-3Vq4.js";import{C as q}from"./calendar-axlD2b3q.js";import{F as G,D as U}from"./file-text-D9j_NDks.js";import{S as $}from"./shield-5lTp9ZFA.js";import"./charts-BaPK5s1M.js";import"./x-OVfnIpib.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=s("battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]),_=s("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),K=s("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),J=s("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),W=s("lock-open",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Z=s("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Q=s("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),X=s("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Y=s("server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),ee=s("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),ae=s("upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),se=[{id:"reset",name:"Reset",icon:e.jsx(X,{className:"w-4 h-4"}),description:"Reiniciar carregador (Soft/Hard)",category:"basic"},{id:"clearCache",name:"Clear Cache",icon:e.jsx(x,{className:"w-4 h-4"}),description:"Limpar cache de autorização",category:"basic"},{id:"changeAvailability",name:"Change Availability",icon:e.jsx(M,{className:"w-4 h-4"}),description:"Alterar disponibilidade do conector",category:"basic"},{id:"unlockConnector",name:"Unlock Connector",icon:e.jsx(W,{className:"w-4 h-4"}),description:"Destravar conector",category:"basic"},{id:"getConfiguration",name:"Get Configuration",icon:e.jsx(g,{className:"w-4 h-4"}),description:"Obter configuração do carregador",category:"configuration"},{id:"changeConfiguration",name:"Change Configuration",icon:e.jsx(g,{className:"w-4 h-4"}),description:"Alterar configuração do carregador",category:"configuration"},{id:"triggerMessage",name:"Trigger Message",icon:e.jsx(O,{className:"w-4 h-4"}),description:"Disparar mensagem OCPP",category:"configuration"},{id:"remoteStartTransaction",name:"Remote Start Transaction",icon:e.jsx(Q,{className:"w-4 h-4"}),description:"Iniciar sessão de carregamento",category:"transactions"},{id:"remoteStopTransaction",name:"Remote Stop Transaction",icon:e.jsx(ee,{className:"w-4 h-4"}),description:"Parar sessão de carregamento",category:"transactions"},{id:"reserveNow",name:"Reserve Now",icon:e.jsx(q,{className:"w-4 h-4"}),description:"Reservar conector",category:"reservations"},{id:"cancelReservation",name:"Cancel Reservation",icon:e.jsx(V,{className:"w-4 h-4"}),description:"Cancelar reserva",category:"reservations"},{id:"setChargingProfile",name:"Set Charging Profile",icon:e.jsx(B,{className:"w-4 h-4"}),description:"Definir perfil de carregamento",category:"smartcharging"},{id:"clearChargingProfile",name:"Clear Charging Profile",icon:e.jsx(x,{className:"w-4 h-4"}),description:"Limpar perfil de carregamento",category:"smartcharging"},{id:"getCompositeSchedule",name:"Get Composite Schedule",icon:e.jsx(u,{className:"w-4 h-4"}),description:"Obter agenda composta",category:"smartcharging"},{id:"getLocalListVersion",name:"Get Local List Version",icon:e.jsx(_,{className:"w-4 h-4"}),description:"Obter versão da lista local",category:"locallist"},{id:"sendLocalList",name:"Send Local List",icon:e.jsx(J,{className:"w-4 h-4"}),description:"Enviar lista de autorização local",category:"locallist"},{id:"updateFirmware",name:"Update Firmware",icon:e.jsx(ae,{className:"w-4 h-4"}),description:"Atualizar firmware",category:"firmware"},{id:"getDiagnostics",name:"Get Diagnostics",icon:e.jsx(G,{className:"w-4 h-4"}),description:"Obter diagnósticos",category:"firmware"},{id:"dataTransfer",name:"Data Transfer",icon:e.jsx(U,{className:"w-4 h-4"}),description:"Transferência de dados proprietários",category:"firmware"},{id:"extendedTriggerMessage",name:"Extended Trigger Message",icon:e.jsx(Z,{className:"w-4 h-4"}),description:"Trigger estendido (Security)",category:"security"},{id:"getLog",name:"Get Log",icon:e.jsx(G,{className:"w-4 h-4"}),description:"Obter logs do carregador",category:"security"},{id:"signedUpdateFirmware",name:"Signed Update Firmware",icon:e.jsx($,{className:"w-4 h-4"}),description:"Atualizar firmware assinado",category:"security"},{id:"installCertificate",name:"Install Certificate",icon:e.jsx(K,{className:"w-4 h-4"}),description:"Instalar certificado",category:"security"},{id:"deleteCertificate",name:"Delete Certificate",icon:e.jsx(x,{className:"w-4 h-4"}),description:"Deletar certificado",category:"security"},{id:"getInstalledCertificateIds",name:"Get Installed Certificates",icon:e.jsx(J,{className:"w-4 h-4"}),description:"Listar certificados instalados",category:"security"}],re={basic:{label:"Comandos Básicos",color:"text-emerald-400",bgColor:"from-emerald-950/40 to-emerald-900/20",borderColor:"border-emerald-800/30"},configuration:{label:"Configuração",color:"text-blue-400",bgColor:"from-blue-950/40 to-blue-900/20",borderColor:"border-blue-800/30"},transactions:{label:"Transações",color:"text-green-400",bgColor:"from-green-950/40 to-green-900/20",borderColor:"border-green-800/30"},reservations:{label:"Reservas",color:"text-orange-400",bgColor:"from-orange-950/40 to-orange-900/20",borderColor:"border-orange-800/30"},smartcharging:{label:"Smart Charging",color:"text-amber-400",bgColor:"from-amber-950/40 to-amber-900/20",borderColor:"border-amber-800/30"},locallist:{label:"Local Auth List",color:"text-cyan-400",bgColor:"from-cyan-950/40 to-cyan-900/20",borderColor:"border-cyan-800/30"},firmware:{label:"Firmware & Diagnósticos",color:"text-violet-400",bgColor:"from-violet-950/40 to-violet-900/20",borderColor:"border-violet-800/30"},security:{label:"Security Extensions",color:"text-purple-400",bgColor:"from-purple-950/40 to-purple-900/20",borderColor:"border-purple-800/30"}},te=()=>{const[s,x]=a.useState([]),[g,u]=a.useState(!0),[O,q]=a.useState([]),[G,U]=a.useState(null),[$,B]=a.useState(!1),[_,K]=a.useState({}),[J,W]=a.useState(!1),[Z,X]=a.useState([]),[ee,ae]=a.useState("operations"),te=a.useCallback(async()=>{try{const e=await r.get("/chargers");if(!e.ok)throw new Error("Failed to fetch chargers");const a=await e.json();x(a)}catch(e){}finally{u(!1)}},[]);a.useEffect(()=>{te();const e=setInterval(()=>{te()},1e4);return()=>clearInterval(e)},[te]);const ie=e=>{X(a=>[{...e,id:Date.now().toString(),timestamp:new Date},...a].slice(0,50))},ce=async(e,a,s,t,i="POST")=>{ie({chargePointId:e,command:t,status:"pending"});try{let c;const n=`/chargers/${encodeURIComponent(e)}/${a}`;if(c="GET"===i?await r.get(n):"DELETE"===i?await r.delete(n,s):await r.post(n,s),!c.ok){const e=await c.json().catch(()=>({error:"Erro desconhecido"}));throw new Error(e.details||e.error||"Erro desconhecido")}const l=await c.json();return ie({chargePointId:e,command:t,status:"success",response:l,message:"Executado com sucesso"}),l}catch(c){const a=c instanceof Error?c.message:"Erro desconhecido";throw ie({chargePointId:e,command:t,status:"error",message:a}),c}},ne=s.filter(e=>e.isConnected).length,le=s.filter(e=>!e.isConnected).length;return g?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 gap-4",children:[e.jsx(t,{className:"w-8 h-8 text-emerald-400 animate-spin"}),e.jsx("p",{className:"text-emerald-300/60",children:"Carregando carregadores..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-emerald-50 flex items-center gap-3",children:[e.jsx(Y,{className:"w-8 h-8 text-emerald-400"}),"Centro de Operações OCPP"]}),e.jsx("p",{className:"text-emerald-300/60 mt-1",children:"Execute comandos OCPP nos carregadores conectados"})]}),e.jsxs(i,{onClick:()=>{te()},variant:"outline",className:"border-emerald-700 text-emerald-300 hover:bg-emerald-900/50",children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[e.jsx(c,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:e.jsxs(n,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:e.jsx(Y,{className:"w-6 h-6 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-300/60",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:s.length})]})]})}),e.jsx(c,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:e.jsxs(n,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-emerald-500/20 rounded-xl",children:e.jsx(M,{className:"w-6 h-6 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-emerald-300/60",children:"Online"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:ne})]})]})}),e.jsx(c,{className:"bg-gradient-to-br from-zinc-900/80 to-zinc-800/50 border-zinc-700/50",children:e.jsxs(n,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-zinc-700/50 rounded-xl",children:e.jsx(R,{className:"w-6 h-6 text-zinc-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-zinc-400",children:"Offline"}),e.jsx("p",{className:"text-2xl font-bold text-zinc-300",children:le})]})]})}),e.jsx(c,{className:"bg-gradient-to-br from-blue-950/40 to-blue-900/20 border-blue-800/30",children:e.jsxs(n,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-500/20 rounded-xl",children:e.jsx(A,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-300/60",children:"Selecionados"}),e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:O.length})]})]})})]}),e.jsxs(N,{value:ee,onValueChange:ae,className:"space-y-6",children:[e.jsxs(f,{className:"bg-emerald-950/50 border border-emerald-800/30",children:[e.jsxs(b,{value:"operations",className:"data-[state=active]:bg-emerald-600",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Operações"]}),e.jsxs(b,{value:"results",className:"data-[state=active]:bg-emerald-600",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Resultados",Z.length>0&&e.jsx(P,{variant:"secondary",className:"ml-2 bg-emerald-500/20 text-emerald-300",children:Z.length})]})]}),e.jsx(y,{value:"operations",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(c,{className:"bg-gradient-to-br from-zinc-900/80 to-zinc-800/50 border-zinc-700/50",children:[e.jsxs(o,{className:"pb-3",children:[e.jsx(d,{className:"text-zinc-100 text-lg",children:"Carregadores"}),e.jsxs(m,{className:"text-zinc-400",children:[O.length," de ",s.length," selecionados"]})]}),e.jsxs(n,{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:()=>{const e=s.filter(e=>e.isConnected).map(e=>e.charge_point_id);q(e)},className:"flex-1 border-emerald-700 text-emerald-300 hover:bg-emerald-900/50 text-xs",children:["Online (",ne,")"]}),e.jsx(i,{size:"sm",variant:"outline",onClick:()=>{q([])},className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800 text-xs",children:"Limpar"})]}),e.jsx(h,{className:"h-[400px]",children:e.jsx("div",{className:"space-y-2 pr-4",children:s.map(a=>e.jsx("button",{onClick:()=>{return e=a.charge_point_id,void q(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e]);var e},className:"w-full p-3 rounded-lg border text-left transition-all "+(O.includes(a.charge_point_id)?"bg-emerald-500/20 border-emerald-500":"bg-zinc-800/50 border-zinc-700/50 hover:border-zinc-600"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-full block "+(a.isConnected?"bg-emerald-400":"bg-zinc-500")}),a.isConnected&&e.jsx("span",{className:"absolute inset-0 w-2.5 h-2.5 rounded-full bg-emerald-400 animate-ping opacity-75"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-zinc-100 truncate text-sm",children:a.charge_point_id}),e.jsxs("p",{className:"text-xs text-zinc-400 truncate",children:[a.vendor||"N/A"," ",a.model||""]})]}),O.includes(a.charge_point_id)&&e.jsx(A,{className:"w-4 h-4 text-emerald-400 flex-shrink-0"})]})},a.charge_point_id))})})]})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(re).map(([a,s])=>{const r=(e=>se.filter(a=>a.category===e))(a);return 0===r.length?null:e.jsxs(c,{className:`bg-gradient-to-br ${s.bgColor} ${s.borderColor}`,children:[e.jsx(o,{className:"pb-2",children:e.jsx(d,{className:`text-sm font-medium ${s.color}`,children:s.label})}),e.jsx(n,{className:"grid grid-cols-2 gap-2",children:r.map(a=>e.jsx("button",{onClick:()=>U(a.id),disabled:0===O.length,className:"p-2 rounded-lg border text-left transition-all disabled:opacity-50 disabled:cursor-not-allowed "+(G===a.id?"bg-white/10 border-white/30":"bg-black/20 border-white/10 hover:border-white/20"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:s.color,children:a.icon}),e.jsx("span",{className:"text-xs font-medium text-zinc-100 truncate",children:a.name})]})},a.id))})]},a)})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-emerald-950/50 to-transparent rounded-xl border border-emerald-800/30",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[G&&e.jsx(P,{variant:"outline",className:"border-emerald-500 text-emerald-300 bg-emerald-500/10",children:se.find(e=>e.id===G)?.name}),O.length>0&&e.jsxs("span",{className:"text-sm text-emerald-300/60",children:[O.length," carregador(es)"]}),!G&&0===O.length&&e.jsx("span",{className:"text-sm text-zinc-400",children:"Selecione carregadores e um comando"})]}),e.jsxs(i,{size:"lg",onClick:()=>{G&&0!==O.length?(K({}),B(!0)):p.error("Selecione um comando e pelo menos um carregador")},disabled:!G||0===O.length,className:"bg-emerald-600 hover:bg-emerald-500 disabled:opacity-50",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Executar"]})]})]})]})}),e.jsx(y,{value:"results",children:e.jsxs(c,{className:"bg-gradient-to-br from-zinc-900/80 to-zinc-800/50 border-zinc-700/50",children:[e.jsxs(o,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{className:"text-zinc-100",children:"Histórico de Comandos"}),e.jsxs(m,{className:"text-zinc-400",children:["Últimos ",Z.length," comandos executados"]})]}),Z.length>0&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>X([]),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Limpar"})]}),e.jsx(n,{children:0===Z.length?e.jsxs("div",{className:"text-center py-12 text-zinc-400",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Nenhum comando executado ainda"})]}):e.jsx(h,{className:"h-[500px]",children:e.jsx("div",{className:"space-y-2 pr-4",children:Z.map(a=>e.jsx("div",{className:"p-3 rounded-lg border "+("success"===a.status?"bg-emerald-500/10 border-emerald-500/30":"error"===a.status?"bg-red-500/10 border-red-500/30":"bg-amber-500/10 border-amber-500/30"),children:e.jsxs("div",{className:"flex items-start gap-3",children:["success"===a.status?e.jsx(A,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}):"error"===a.status?e.jsx(V,{className:"w-4 h-4 text-red-400 mt-0.5 flex-shrink-0"}):e.jsx(t,{className:"w-4 h-4 text-amber-400 animate-spin mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-100",children:a.command}),e.jsx("span",{className:"text-xs text-zinc-500",children:a.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("p",{className:"text-xs text-zinc-400",children:a.chargePointId}),a.message&&e.jsx("p",{className:"text-xs mt-1 "+("error"===a.status?"text-red-400":"text-zinc-500"),children:a.message}),a.response&&e.jsx("pre",{className:"mt-2 text-xs text-zinc-500 bg-black/20 p-2 rounded overflow-x-auto",children:JSON.stringify(a.response,null,2)})]})]})},a.id))})})})]})})]}),e.jsx(T,{open:$,onOpenChange:B,children:e.jsxs(z,{className:"sm:max-w-[500px] bg-zinc-900 border-zinc-700",children:[e.jsxs(D,{children:[e.jsxs(L,{className:"text-zinc-100 flex items-center gap-2",children:[se.find(e=>e.id===G)?.icon,se.find(e=>e.id===G)?.name]}),e.jsxs(E,{className:"text-zinc-400",children:["Executar em ",e.jsxs("span",{className:"text-emerald-400 font-medium",children:[O.length," carregador(es)"]})]})]}),e.jsx("div",{className:"space-y-4 py-4",children:(()=>{const a="bg-zinc-900/50 border-zinc-700 text-zinc-100 placeholder:text-zinc-500";switch(G){case"reset":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Tipo de Reset"}),e.jsxs(C,{value:_.type||"Soft",onValueChange:e=>K({..._,type:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"Soft",children:"Soft (Reinicialização leve)"}),e.jsx(S,{value:"Hard",children:"Hard (Reinicialização completa)"})]})]})]});case"changeAvailability":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID"}),e.jsx(v,{className:a,type:"number",placeholder:"0 = todos",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Tipo"}),e.jsxs(C,{value:_.type||"Operative",onValueChange:e=>K({..._,type:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"Operative",children:"Operative (Disponível)"}),e.jsx(S,{value:"Inoperative",children:"Inoperative (Indisponível)"})]})]})]})]});case"unlockConnector":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]});case"changeConfiguration":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Configuration Key"}),e.jsx(v,{className:a,placeholder:"Ex: HeartbeatInterval",value:_.key||"",onChange:e=>K({..._,key:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Value"}),e.jsx(v,{className:a,placeholder:"Ex: 300",value:_.value||"",onChange:e=>K({..._,value:e.target.value})})]})]});case"triggerMessage":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Mensagem"}),e.jsxs(C,{value:_.message||"",onValueChange:e=>K({..._,message:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{placeholder:"Selecione..."})}),e.jsxs(k,{children:[e.jsx(S,{value:"BootNotification",children:"Boot Notification"}),e.jsx(S,{value:"DiagnosticsStatusNotification",children:"Diagnostics Status"}),e.jsx(S,{value:"FirmwareStatusNotification",children:"Firmware Status"}),e.jsx(S,{value:"Heartbeat",children:"Heartbeat"}),e.jsx(S,{value:"MeterValues",children:"Meter Values"}),e.jsx(S,{value:"StatusNotification",children:"Status Notification"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID (opcional)"}),e.jsx(v,{className:a,type:"number",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]})]});case"remoteStartTransaction":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"ID Tag (RFID) *"}),e.jsx(v,{className:a,placeholder:"Ex: TAG001",value:_.idTag||"",onChange:e=>K({..._,idTag:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID (opcional)"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]})]});case"remoteStopTransaction":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Transaction ID *"}),e.jsx(v,{className:a,type:"number",placeholder:"Ex: 123",value:_.transactionId||"",onChange:e=>K({..._,transactionId:e.target.value})})]});case"reserveNow":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID"}),e.jsx(v,{className:a,type:"number",placeholder:"0",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"ID Tag *"}),e.jsx(v,{className:a,placeholder:"TAG001",value:_.idTag||"",onChange:e=>K({..._,idTag:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Reservation ID *"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.reservationId||"",onChange:e=>K({..._,reservationId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Expiry Date"}),e.jsx(v,{className:a,type:"datetime-local",value:_.expiryDate||"",onChange:e=>K({..._,expiryDate:e.target.value})})]})]});case"cancelReservation":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Reservation ID *"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.reservationId||"",onChange:e=>K({..._,reservationId:e.target.value})})]});case"setChargingProfile":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID"}),e.jsx(v,{className:a,type:"number",placeholder:"0",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})}),e.jsx("p",{className:"text-xs text-zinc-500",children:"0 = ChargePoint como um todo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Charging Profile (JSON)"}),e.jsx("textarea",{className:`${a} w-full h-32 p-2 rounded-md border font-mono text-sm`,placeholder:'{"chargingProfileId": 1, "stackLevel": 0, ...}',value:_.chargingProfile||"",onChange:e=>K({..._,chargingProfile:e.target.value})})]})]});case"clearChargingProfile":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Profile ID (opcional)"}),e.jsx(v,{className:a,type:"number",value:_.profileId||"",onChange:e=>K({..._,profileId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID (opcional)"}),e.jsx(v,{className:a,type:"number",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Purpose (opcional)"}),e.jsxs(C,{value:_.purpose||"",onValueChange:e=>K({..._,purpose:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{placeholder:"Selecione..."})}),e.jsxs(k,{children:[e.jsx(S,{value:"",children:"Nenhum"}),e.jsx(S,{value:"ChargePointMaxProfile",children:"ChargePoint Max Profile"}),e.jsx(S,{value:"TxDefaultProfile",children:"Tx Default Profile"}),e.jsx(S,{value:"TxProfile",children:"Tx Profile"})]})]})]})]});case"getCompositeSchedule":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID"}),e.jsx(v,{className:a,type:"number",placeholder:"0",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Duration (segundos)"}),e.jsx(v,{className:a,type:"number",placeholder:"86400",value:_.duration||"",onChange:e=>K({..._,duration:e.target.value})})]})]});case"sendLocalList":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"List Version"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.listVersion||"",onChange:e=>K({..._,listVersion:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Update Type"}),e.jsxs(C,{value:_.updateType||"Full",onValueChange:e=>K({..._,updateType:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"Full",children:"Full (Substituir lista)"}),e.jsx(S,{value:"Differential",children:"Differential (Atualizar)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Authorization List (JSON)"}),e.jsx("textarea",{className:`${a} w-full h-24 p-2 rounded-md border font-mono text-sm`,placeholder:'[{"idTag": "TAG1", "idTagInfo": {"status": "Accepted"}}]',value:_.authList||"",onChange:e=>K({..._,authList:e.target.value})})]})]});case"updateFirmware":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Firmware Location (URL) *"}),e.jsx(v,{className:a,placeholder:"https://server/firmware.bin",value:_.location||"",onChange:e=>K({..._,location:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Retrieve Date"}),e.jsx(v,{className:a,type:"datetime-local",value:_.retrieveDate||"",onChange:e=>K({..._,retrieveDate:e.target.value})})]})]});case"getDiagnostics":return e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Upload Location (URL) *"}),e.jsx(v,{className:a,placeholder:"ftp://server/upload",value:_.location||"",onChange:e=>K({..._,location:e.target.value})})]});case"dataTransfer":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Vendor ID *"}),e.jsx(v,{className:a,placeholder:"Ex: NeoPower",value:_.vendorId||"",onChange:e=>K({..._,vendorId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Message ID (opcional)"}),e.jsx(v,{className:a,placeholder:"Ex: CustomMessage",value:_.messageId||"",onChange:e=>K({..._,messageId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Data (opcional)"}),e.jsx(v,{className:a,placeholder:"Dados em texto",value:_.data||"",onChange:e=>K({..._,data:e.target.value})})]})]});case"extendedTriggerMessage":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Requested Message"}),e.jsxs(C,{value:_.requestedMessage||"",onValueChange:e=>K({..._,requestedMessage:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{placeholder:"Selecione..."})}),e.jsxs(k,{children:[e.jsx(S,{value:"BootNotification",children:"Boot Notification"}),e.jsx(S,{value:"LogStatusNotification",children:"Log Status Notification"}),e.jsx(S,{value:"FirmwareStatusNotification",children:"Firmware Status Notification"}),e.jsx(S,{value:"Heartbeat",children:"Heartbeat"}),e.jsx(S,{value:"MeterValues",children:"Meter Values"}),e.jsx(S,{value:"SignChargePointCertificate",children:"Sign ChargePoint Certificate"}),e.jsx(S,{value:"StatusNotification",children:"Status Notification"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Connector ID (opcional)"}),e.jsx(v,{className:a,type:"number",value:_.connectorId||"",onChange:e=>K({..._,connectorId:e.target.value})})]})]});case"getLog":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Log Type"}),e.jsxs(C,{value:_.logType||"DiagnosticsLog",onValueChange:e=>K({..._,logType:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"DiagnosticsLog",children:"Diagnostics Log"}),e.jsx(S,{value:"SecurityLog",children:"Security Log"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Request ID"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.requestId||"",onChange:e=>K({..._,requestId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Remote Location (URL)"}),e.jsx(v,{className:a,placeholder:"ftp://server/logs/",value:_.remoteLocation||"",onChange:e=>K({..._,remoteLocation:e.target.value})})]})]});case"installCertificate":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Certificate Type"}),e.jsxs(C,{value:_.certificateType||"CentralSystemRootCertificate",onValueChange:e=>K({..._,certificateType:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"CentralSystemRootCertificate",children:"Central System Root Certificate"}),e.jsx(S,{value:"ManufacturerRootCertificate",children:"Manufacturer Root Certificate"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Certificate (PEM)"}),e.jsx("textarea",{className:`${a} w-full h-32 p-2 rounded-md border font-mono text-sm`,placeholder:"-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----",value:_.certificate||"",onChange:e=>K({..._,certificate:e.target.value})})]})]});case"deleteCertificate":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Hash Algorithm"}),e.jsxs(C,{value:_.hashAlgorithm||"SHA256",onValueChange:e=>K({..._,hashAlgorithm:e}),children:[e.jsx(w,{className:a,children:e.jsx(I,{})}),e.jsxs(k,{children:[e.jsx(S,{value:"SHA256",children:"SHA256"}),e.jsx(S,{value:"SHA384",children:"SHA384"}),e.jsx(S,{value:"SHA512",children:"SHA512"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Issuer Name Hash *"}),e.jsx(v,{className:a,placeholder:"Hash do nome do emissor",value:_.issuerNameHash||"",onChange:e=>K({..._,issuerNameHash:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Issuer Key Hash *"}),e.jsx(v,{className:a,placeholder:"Hash da chave do emissor",value:_.issuerKeyHash||"",onChange:e=>K({..._,issuerKeyHash:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Serial Number *"}),e.jsx(v,{className:a,placeholder:"Número de série do certificado",value:_.serialNumber||"",onChange:e=>K({..._,serialNumber:e.target.value})})]})]});case"signedUpdateFirmware":return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Request ID"}),e.jsx(v,{className:a,type:"number",placeholder:"1",value:_.requestId||"",onChange:e=>K({..._,requestId:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Firmware Location (URL) *"}),e.jsx(v,{className:a,placeholder:"https://server/firmware.bin",value:_.location||"",onChange:e=>K({..._,location:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Retrieve DateTime"}),e.jsx(v,{className:a,type:"datetime-local",value:_.retrieveDateTime||"",onChange:e=>K({..._,retrieveDateTime:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Signing Certificate (PEM)"}),e.jsx("textarea",{className:`${a} w-full h-24 p-2 rounded-md border font-mono text-sm`,placeholder:"-----BEGIN CERTIFICATE-----",value:_.signingCertificate||"",onChange:e=>K({..._,signingCertificate:e.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Signature (Base64)"}),e.jsx(v,{className:a,placeholder:"Assinatura em Base64",value:_.signature||"",onChange:e=>K({..._,signature:e.target.value})})]})]});case"clearCache":case"getConfiguration":case"getLocalListVersion":case"getInstalledCertificateIds":return e.jsx("p",{className:"text-zinc-400 text-sm py-4",children:"Este comando não requer parâmetros adicionais."});default:return e.jsx("p",{className:"text-zinc-400 text-sm py-4",children:"Selecione um comando para ver os parâmetros."})}})()}),e.jsxs(F,{children:[e.jsx(i,{variant:"outline",onClick:()=>B(!1),className:"border-zinc-700 text-zinc-300 hover:bg-zinc-800",children:"Cancelar"}),e.jsx(i,{onClick:()=>{(async()=>{if(!G)return;W(!0);const e=se.find(e=>e.id===G),a=e?.name||G;let s=0,r=0;for(const t of O)try{const e=_;switch(G){case"reset":await ce(t,"reset",{type:e.type||"Soft"},a);break;case"clearCache":await ce(t,"clear-cache",{},a);break;case"changeAvailability":await ce(t,"availability",{connectorId:parseInt(e.connectorId)||0,type:e.type||"Operative"},a);break;case"unlockConnector":await ce(t,"unlock",{connectorId:parseInt(e.connectorId)||1},a);break;case"getConfiguration":await ce(t,"config",{},a,"GET");break;case"changeConfiguration":await ce(t,"config",{key:e.key,value:e.value},a);break;case"triggerMessage":await ce(t,"trigger",{message:e.message,connectorId:e.connectorId?parseInt(e.connectorId):void 0},a);break;case"remoteStartTransaction":await ce(t,"start",{idTag:e.idTag,connectorId:e.connectorId?parseInt(e.connectorId):void 0},a);break;case"remoteStopTransaction":await ce(t,"stop",{transactionId:parseInt(e.transactionId)},a);break;case"reserveNow":await ce(t,"reserve",{connectorId:parseInt(e.connectorId)||0,idTag:e.idTag,reservationId:parseInt(e.reservationId),expiryDate:e.expiryDate},a);break;case"cancelReservation":await ce(t,"cancel-reservation",{reservationId:parseInt(e.reservationId)},a);break;case"setChargingProfile":await ce(t,"charging-profile",{connectorId:parseInt(e.connectorId)||0,csChargingProfiles:JSON.parse(e.chargingProfile||"{}")},a);break;case"clearChargingProfile":await ce(t,"clear-charging-profile",{id:e.profileId?parseInt(e.profileId):void 0,connectorId:e.connectorId?parseInt(e.connectorId):void 0,chargingProfilePurpose:e.purpose||void 0,stackLevel:e.stackLevel?parseInt(e.stackLevel):void 0},a);break;case"getCompositeSchedule":await ce(t,"composite-schedule",{connectorId:parseInt(e.connectorId)||0,duration:parseInt(e.duration)||86400},a);break;case"getLocalListVersion":await ce(t,"local-list-version",{},a,"GET");break;case"sendLocalList":await ce(t,"local-list",{listVersion:parseInt(e.listVersion),updateType:e.updateType||"Full",localAuthorizationList:JSON.parse(e.authList||"[]")},a);break;case"updateFirmware":await ce(t,"update-firmware",{location:e.location,retrieveDate:e.retrieveDate||(new Date).toISOString()},a);break;case"getDiagnostics":await ce(t,"diagnostics",{location:e.location},a);break;case"dataTransfer":await ce(t,"data-transfer",{vendorId:e.vendorId,messageId:e.messageId,data:e.data},a);break;case"extendedTriggerMessage":await ce(t,"extended-trigger",{requestedMessage:e.requestedMessage,connectorId:e.connectorId?parseInt(e.connectorId):void 0},a);break;case"getLog":await ce(t,"get-log",{logType:e.logType||"DiagnosticsLog",requestId:parseInt(e.requestId)||1,remoteLocation:e.remoteLocation},a);break;case"signedUpdateFirmware":await ce(t,"signed-update-firmware",{requestId:parseInt(e.requestId)||1,location:e.location,retrieveDateTime:e.retrieveDateTime,signingCertificate:e.signingCertificate,signature:e.signature},a);break;case"installCertificate":await ce(t,"install-certificate",{certificateType:e.certificateType,certificate:e.certificate},a);break;case"deleteCertificate":await ce(t,"delete-certificate",{certificateHashData:{hashAlgorithm:e.hashAlgorithm,issuerNameHash:e.issuerNameHash,issuerKeyHash:e.issuerKeyHash,serialNumber:e.serialNumber}},a);break;case"getInstalledCertificateIds":await ce(t,"certificates",{},a,"GET");break;default:throw new Error("Comando não implementado")}s++}catch{r++}W(!1),B(!1),U(null),K({}),s>0&&0===r?p.success(`Comando executado em ${s} carregador(es)`):r>0&&s>0?p.warning(`${s} sucesso(s), ${r} erro(s)`):r>0&&p.error(`Falha em ${r} carregador(es)`)})()},disabled:J,className:"bg-emerald-600 hover:bg-emerald-500",children:J?e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"w-4 h-4 mr-2 animate-spin"}),"Executando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Executar"]})})]})]})})]})};export{te as Operations,te as default};
