const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapWrapper-BLPXcfpu.js","assets/index-BaJa-ZGP.js","assets/ui-vendor-D6QdPKSZ.js","assets/react-vendor-BVAhLato.js","assets/charts-BaPK5s1M.js","assets/index-DtaFYdOY.css","assets/maps-YSpKBqha.js"])))=>i.map(i=>d[i]);
import{j as e}from"./ui-vendor-D6QdPKSZ.js";import{d as a,a as r,h as s}from"./react-vendor-BVAhLato.js";import{T as l,a as t,b as o,c as d}from"./tabs-Dd5MU0P_.js";import{c as n,_ as c,M as i,h as m,I as x,g as h,B as p,t as u,f as g}from"./index-BaJa-ZGP.js";import{T as b}from"./textarea-CUg0IQnS.js";import{S as f,a as j,b as v,c as N,d as w}from"./select-DGz8aZRk.js";import{T as k,M as y,L as _,u as C,P as z}from"./maps-YSpKBqha.js";import{A as L}from"./arrow-left-DyD3RTlX.js";import{X as S}from"./x-OVfnIpib.js";import{U as $,S as F}from"./user-Dx1ea5Ke.js";import"./charts-BaPK5s1M.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=n("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),M=n("palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),P=()=>e.jsx("div",{className:"flex items-center justify-center h-full w-full bg-emerald-950/20",children:e.jsx("p",{className:"text-emerald-400/50 animate-pulse",children:"Carregando mapa..."})}),A=r.lazy(()=>c(()=>import("./MapWrapper-BLPXcfpu.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.MapWrapper}))),B=s=>{const[l,t]=a.useState(!1);return a.useEffect(()=>{t(!0)},[]),l?e.jsx(r.Suspense,{fallback:e.jsx(P,{}),children:e.jsx(A,{...s})}):e.jsx(P,{})};if("undefined"!=typeof window&&_)try{delete _.Icon.Default.prototype._getIconUrl,_.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"})}catch{}const D=["domingo","segunda","terca","quarta","quinta","sexta","sabado"],U={domingo:"Domingo",segunda:"Segunda-feira",terca:"Terça-feira",quarta:"Quarta-feira",quinta:"Quinta-feira",sexta:"Sexta-feira",sabado:"Sábado"},V=({center:e})=>{const r=C();return a.useEffect(()=>{r.setView(e,16)},[e,r]),null},W=()=>_?_.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[0,-41]}):null;function R({onSuccess:s,onCancel:n}){const[c,_]=r.useState("info"),[C,z]=r.useState(!1),[P,A]=r.useState(!1),[R,T]=r.useState([-14.235,-51.925]),[q,I]=r.useState(null),[O,G]=r.useState({name:"",cep:"",address:"",numero:"",complemento:"",cidade:"",estado:"",pais:"Brasil",latitude:-23.5505,longitude:-46.6333,razao_social:"",cnpj:"",tipo_negocio:"comercial",tipo_local:"publico",tipo_estacionamento:"gratis",horario_funcionamento:{},observacoes:"",logo_url:"",cor_fundo:"#10b981",imagem_local_url:"",nome_responsavel:"",cpf_responsavel:"",email_responsavel:"",telefone_responsavel:""});a.useEffect(()=>{const e={};D.forEach(a=>{e[a]={tipo:"24horas",abre_as:"00:00",fecha_as:"23:59"}}),G(a=>({...a,horario_funcionamento:e}))},[]);const H=async(e,a,r,s)=>{const l=`${e}, ${a}, ${r}, ${s}, Brasil`;try{const e=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(l)}&format=json&limit=1`),a=await e.json();if(a&&a.length>0){const{lat:e,lon:r}=a[0],s=[parseFloat(e),parseFloat(r)];G(a=>({...a,latitude:parseFloat(e),longitude:parseFloat(r)})),T(s),I(s),u.success("Localização encontrada no mapa!")}else u.warning("Endereço não encontrado no mapa")}catch(t){u.error("Erro ao buscar localização no mapa")}};return e.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border border-emerald-800/30 rounded-xl overflow-hidden shadow-2xl shadow-emerald-900/30 backdrop-blur-sm",children:[e.jsxs("div",{className:"relative px-6 py-5 border-b border-emerald-800/30 bg-gradient-to-r from-emerald-900/50 via-emerald-950/30 to-transparent flex-shrink-0",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-emerald-500/15 via-transparent to-transparent"}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-emerald-900/30 hover:bg-emerald-800/50 text-emerald-300 hover:text-emerald-100 transition-all duration-300 border border-emerald-800/30",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl text-emerald-50 font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-emerald-500/20 rounded-xl border border-emerald-500/30 shadow-lg shadow-emerald-900/20",children:e.jsx(i,{className:"w-5 h-5 text-emerald-400"})}),"Adicionar Novo Local"]}),e.jsx("p",{className:"text-emerald-300/60 text-sm mt-1 ml-[52px]",children:"Preencha as informações do eletroposto"})]})]}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-emerald-900/30 text-emerald-400 hover:text-emerald-200 transition-all",children:e.jsx(S,{className:"w-5 h-5"})})]})]}),e.jsxs(l,{value:c,onValueChange:_,className:"flex flex-col flex-1 min-h-0",children:[e.jsxs(t,{className:"flex w-full bg-emerald-950/50 px-6 gap-2 border-b border-emerald-800/30 h-auto justify-start rounded-none py-3 flex-shrink-0",children:[e.jsxs(o,{value:"info",className:"flex items-center gap-2 px-5 py-3 data-[state=active]:bg-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-emerald-900/50 data-[state=active]:border-emerald-500 text-emerald-300/70 hover:bg-emerald-900/40 hover:text-emerald-200 rounded-lg transition-all duration-300 text-sm font-medium border border-transparent",children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:"Localização"})]}),e.jsxs(o,{value:"business",className:"flex items-center gap-2 px-5 py-3 data-[state=active]:bg-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-emerald-900/50 data-[state=active]:border-emerald-500 text-emerald-300/70 hover:bg-emerald-900/40 hover:text-emerald-200 rounded-lg transition-all duration-300 text-sm font-medium border border-transparent",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Negócio"})]}),e.jsxs(o,{value:"custom",className:"flex items-center gap-2 px-5 py-3 data-[state=active]:bg-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-emerald-900/50 data-[state=active]:border-emerald-500 text-emerald-300/70 hover:bg-emerald-900/40 hover:text-emerald-200 rounded-lg transition-all duration-300 text-sm font-medium border border-transparent",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Responsável"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 bg-gradient-to-b from-emerald-950/20 to-zinc-950/40",children:[e.jsx(d,{value:"info",className:"space-y-5 mt-0","data-state":"info"===c?"active":"inactive",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"name",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Nome do Local ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"name",value:O.name,onChange:e=>G({...O,name:e.target.value}),placeholder:"Ex: Shopping Center Norte",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"cep",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["CEP ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"cep",value:O.cep,onChange:e=>{const a=e.target.value.replace(/\D/g,"").replace(/^(\d{5})(\d{3})$/,"$1-$2");G({...O,cep:a})},onBlur:async()=>{const e=O.cep.replace(/\D/g,"");if(8===e.length){A(!0);try{const a=await fetch(`https://viacep.com.br/ws/${e}/json/`),r=await a.json();if(r.erro)return void u.error("CEP não encontrado");G(e=>({...e,address:r.logradouro||"",cidade:r.localidade||"",estado:r.uf||"",complemento:r.complemento||e.complemento})),u.success("Endereço preenchido automaticamente!"),r.logradouro&&r.localidade&&r.uf&&await H(r.logradouro,"",r.localidade,r.uf)}catch(a){u.error("Erro ao buscar CEP")}finally{A(!1)}}},placeholder:"00000-000",maxLength:9,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs(m,{htmlFor:"address",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Endereço ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"address",value:O.address,onChange:e=>G({...O,address:e.target.value}),placeholder:"Rua, Avenida...",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"numero",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Nº ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"numero",value:O.numero,onChange:e=>G({...O,numero:e.target.value}),onBlur:()=>{const{address:e,numero:a,cidade:r,estado:s}=O;e&&a&&r&&s&&H(e,a,r,s)},placeholder:"123",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"complemento",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:"Complemento"}),e.jsx(x,{id:"complemento",value:O.complemento,onChange:e=>G({...O,complemento:e.target.value}),placeholder:"Sala 1",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"cidade",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Cidade ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"cidade",value:O.cidade,onChange:e=>G({...O,cidade:e.target.value}),placeholder:"São Paulo",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"estado",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["UF ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"estado",value:O.estado,onChange:e=>G({...O,estado:e.target.value.toUpperCase()}),placeholder:"SP",maxLength:2,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm uppercase placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]})]}),q&&e.jsxs("div",{className:"flex items-center justify-center gap-2 py-3 px-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx(i,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("p",{className:"text-sm text-emerald-400 font-mono",children:[O.latitude.toFixed(6),", ",O.longitude.toFixed(6)]})]})]}),e.jsx("div",{className:"h-[300px] lg:h-full min-h-[300px] rounded-xl border border-emerald-800/40 overflow-hidden shadow-lg shadow-emerald-900/20",children:e.jsxs(B,{center:R,zoom:4,className:"z-0 h-full w-full",children:[e.jsx(k,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:"© OpenStreetMap"}),e.jsx(V,{center:R}),q&&W()&&e.jsx(y,{position:q,icon:W()})]})})]})}),e.jsx(d,{value:"business",className:"space-y-5 mt-0","data-state":"business"===c?"active":"inactive",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"razao_social",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Razão Social ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"razao_social",value:O.razao_social,onChange:e=>G({...O,razao_social:e.target.value}),placeholder:"Empresa LTDA",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"cnpj",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["CNPJ ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"cnpj",value:O.cnpj,onChange:e=>{const a=e.target.value.replace(/\D/g,"").replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/,"$1.$2.$3/$4-$5");G({...O,cnpj:a})},placeholder:"00.000.000/0000-00",maxLength:18,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx(m,{className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:"Tipo Negócio"}),e.jsxs(f,{value:O.tipo_negocio,onValueChange:e=>G({...O,tipo_negocio:e}),children:[e.jsx(j,{className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm",children:e.jsx(v,{})}),e.jsxs(N,{className:"bg-emerald-950 border-emerald-800/50",children:[e.jsx(w,{value:"comercial",children:"Comercial"}),e.jsx(w,{value:"condominio_residencial",children:"Condomínio"}),e.jsx(w,{value:"publico",children:"Público"}),e.jsx(w,{value:"shopping",children:"Shopping"}),e.jsx(w,{value:"posto",children:"Posto"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:"Acesso"}),e.jsxs(f,{value:O.tipo_local,onValueChange:e=>G({...O,tipo_local:e}),children:[e.jsx(j,{className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm",children:e.jsx(v,{})}),e.jsxs(N,{className:"bg-emerald-950 border-emerald-800/50",children:[e.jsx(w,{value:"publico",children:"Público"}),e.jsx(w,{value:"privado",children:"Privado"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:"Estacionamento"}),e.jsxs(f,{value:O.tipo_estacionamento,onValueChange:e=>G({...O,tipo_estacionamento:e}),children:[e.jsx(j,{className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm",children:e.jsx(v,{})}),e.jsxs(N,{className:"bg-emerald-950 border-emerald-800/50",children:[e.jsx(w,{value:"gratis",children:"Grátis"}),e.jsx(w,{value:"pago",children:"Pago"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m,{className:"text-emerald-200/80 text-sm block font-medium flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4 text-emerald-400"}),"Horário de Funcionamento"]}),e.jsx("div",{className:"grid grid-cols-1 gap-2 p-4 rounded-xl bg-emerald-950/20 border border-emerald-800/30 max-h-[280px] overflow-y-auto",children:D.map(a=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-900/20 border border-emerald-800/20",children:[e.jsx("span",{className:"text-emerald-300 w-24 font-medium text-sm",children:U[a]}),e.jsxs(f,{value:O.horario_funcionamento[a]?.tipo||"24horas",onValueChange:e=>{const r={...O.horario_funcionamento};r[a]={...r[a],tipo:e,abre_as:"00:00",fecha_as:"23:59"},G({...O,horario_funcionamento:r})},children:[e.jsx(j,{className:"bg-emerald-950/40 text-emerald-50 border-emerald-800/40 h-9 text-sm flex-1",children:e.jsx(v,{})}),e.jsxs(N,{className:"bg-emerald-950 border-emerald-800/50",children:[e.jsx(w,{value:"24horas",children:"24 horas"}),e.jsx(w,{value:"customizado",children:"Customizado"}),e.jsx(w,{value:"fechado",children:"Fechado"})]})]})]},a))})]})]})}),e.jsx(d,{value:"custom",className:"space-y-5 mt-0","data-state":"custom"===c?"active":"inactive",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"nome_responsavel",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Responsável ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"nome_responsavel",value:O.nome_responsavel,onChange:e=>G({...O,nome_responsavel:e.target.value}),placeholder:"Nome completo",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"cpf_responsavel",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["CPF ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"cpf_responsavel",value:O.cpf_responsavel,onChange:e=>{const a=e.target.value.replace(/\D/g,"").replace(/^(\d{3})(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3-$4");G({...O,cpf_responsavel:a})},placeholder:"000.000.000-00",maxLength:14,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"email_responsavel",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Email ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"email_responsavel",type:"email",value:O.email_responsavel,onChange:e=>G({...O,email_responsavel:e.target.value}),placeholder:"email@empresa.com",className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]}),e.jsxs("div",{children:[e.jsxs(m,{htmlFor:"telefone_responsavel",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:["Telefone ",e.jsx("span",{className:"text-emerald-400",children:"*"})]}),e.jsx(x,{id:"telefone_responsavel",value:O.telefone_responsavel,onChange:e=>{const a=e.target.value.replace(/\D/g,""),r=11===a.length?a.replace(/^(\d{2})(\d{5})(\d{4})$/,"($1) $2-$3"):a.replace(/^(\d{2})(\d{4})(\d{4})$/,"($1) $2-$3");G({...O,telefone_responsavel:r})},placeholder:"(00) 00000-0000",maxLength:15,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 h-11 text-sm placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"observacoes",className:"text-emerald-200/80 text-sm mb-2 block font-medium",children:"Observações"}),e.jsx(b,{id:"observacoes",value:O.observacoes,onChange:e=>G({...O,observacoes:e.target.value}),placeholder:"Informações adicionais...",rows:4,className:"bg-emerald-950/30 text-emerald-50 border-emerald-800/50 text-sm resize-none placeholder:text-emerald-300/30 focus:border-emerald-500 focus:ring-emerald-500/20"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-emerald-950/20 border border-emerald-800/30",children:[e.jsxs(m,{className:"text-emerald-200/80 text-sm block font-medium flex items-center gap-2 mb-4",children:[e.jsx(M,{className:"w-4 h-4 text-emerald-400"}),"Personalização Visual"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-emerald-300/70 text-sm",children:"Cor do Local:"}),e.jsx(x,{type:"color",value:O.cor_fundo,onChange:e=>G({...O,cor_fundo:e.target.value}),className:"w-14 h-10 cursor-pointer bg-transparent border-emerald-800/50 p-1 rounded-lg"}),e.jsx(x,{value:O.cor_fundo,onChange:e=>G({...O,cor_fundo:e.target.value}),className:"w-32 bg-emerald-950/40 text-emerald-50 border-emerald-800/50 h-10 text-sm font-mono"})]})]}),e.jsx("div",{className:"p-4 rounded-xl bg-emerald-500/5 border border-emerald-500/20",children:e.jsxs("p",{className:"text-emerald-300/60 text-sm",children:[e.jsx("span",{className:"text-emerald-400 font-medium",children:"Dica:"})," Após criar o local, você poderá adicionar carregadores e conectores através da página de detalhes do local."]})})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 px-6 py-4 border-t border-emerald-800/30 bg-gradient-to-r from-emerald-950/50 to-transparent flex-shrink-0",children:[e.jsx("p",{className:"text-sm text-emerald-300/40",children:"* Campos obrigatórios"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{variant:"outline",onClick:n,className:"border-emerald-800/50 hover:bg-emerald-900/30 hover:border-emerald-700 text-emerald-300 h-11 px-6 text-sm font-medium transition-all duration-300",disabled:C,children:"Cancelar"}),e.jsx(p,{onClick:async()=>{if(!O.name||!O.cep||!O.address)return u.error("Preencha todos os campos obrigatórios da Aba 1"),void _("info");if(!O.razao_social||!O.cnpj)return u.error("Preencha todos os campos obrigatórios da Aba 2"),void _("business");if(!O.nome_responsavel||!O.cpf_responsavel||!O.email_responsavel)return u.error("Preencha todos os campos obrigatórios da Aba 3"),void _("custom");z(!0);try{const e=await g.post("/locations",O);if(!e.ok){const a=await e.json();throw new Error(a.error||"Erro ao criar local")}u.success("Local criado com sucesso!"),s()}catch(e){u.error(e instanceof Error?e.message:"Erro desconhecido")}finally{z(!1)}},disabled:C,className:"bg-emerald-600 hover:bg-emerald-500 text-white h-11 px-8 text-sm font-semibold shadow-lg shadow-emerald-900/30 hover:shadow-emerald-900/50 transition-all duration-300 disabled:opacity-50",children:C?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"inline-block w-4 h-4 mr-2 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Salvando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"Salvar Local"]})})]})]})]})]})}function T({center:e,zoom:r}){const s=C();return a.useEffect(()=>{e&&s.setView(e,r)},[e,r,s]),null}const q=()=>{const a=s(),[l,t]=r.useState([]),[o,d]=r.useState([]),[n,c]=r.useState(!0),[i,m]=r.useState(!1),[x,h]=r.useState(null),p=r.useCallback(async()=>{c(!0);try{const e=await g.get("/locations");if(e.ok){const a=await e.json();t(a)}const a=await g.get("/chargers");if(a.ok){const e=await a.json();d(e)}}catch(e){u.error("Erro ao carregar dados")}finally{c(!1)}},[]);r.useEffect(()=>{p()},[p]);const b=()=>{m(!1),p(),u.success("Local adicionado com sucesso!")},f=()=>{m(!1)},j=x||[-14.235,-51.925],v=x?16:4;return i?e.jsx("div",{className:"flex flex-col h-[calc(100vh-4rem)] max-h-[calc(100vh-4rem)]",children:e.jsx(R,{onSuccess:b,onCancel:f})}):e.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] max-h-[calc(100vh-4rem)]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-emerald-50 flex items-center gap-3",children:[e.jsxs("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Locais"]}),e.jsx("p",{className:"text-emerald-300/60 mt-1",children:"Gerencie os locais dos eletropostos"})]}),e.jsxs("button",{onClick:()=>m(!0),className:"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-semibold transition-all shadow-lg shadow-emerald-900/30 hover:shadow-emerald-900/50",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Local"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(300px,350px)_1fr] gap-6 flex-1 min-h-0",children:[e.jsxs("div",{className:"overflow-y-auto pr-2 custom-scrollbar "+(0===l.length||n?"flex":"space-y-3"),children:[n&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full py-10 bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border border-emerald-800/30 rounded-lg",children:[e.jsx("div",{className:"inline-block w-10 h-10 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mb-4"}),e.jsx("p",{className:"text-emerald-300",children:"Carregando locais..."})]}),!n&&0===l.length&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full py-16 bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border border-emerald-800/30 rounded-lg",children:[e.jsxs("svg",{className:"w-10 h-10 text-emerald-500/30 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),e.jsx("p",{className:"text-lg text-emerald-300 font-semibold",children:"Nenhum local cadastrado"}),e.jsx("p",{className:"text-sm text-emerald-400/60 mt-1",children:'Clique em "Adicionar Local" para começar'})]}),l.map(r=>e.jsxs("div",{className:"group flex bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border border-emerald-800/30 rounded-lg overflow-hidden hover:border-emerald-500/50 hover:shadow-lg hover:shadow-emerald-900/20 transition-all duration-300 backdrop-blur-sm",children:[e.jsxs("button",{onClick:()=>(e=>{a(`/locais/${e.location_id}`)})(r),className:"flex-1 p-5 text-left hover:bg-emerald-800/10 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-emerald-50 group-hover:text-emerald-400 transition-colors",children:r.name}),e.jsxs("span",{className:"text-xs bg-emerald-500/20 text-emerald-400 px-2 py-1 rounded-full",children:[r.cidade,"/",r.estado]})]}),e.jsx("p",{className:"text-sm text-emerald-300/70 mb-4 line-clamp-2",children:r.address}),e.jsxs("div",{className:"flex items-center gap-2 text-emerald-300",children:[e.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),e.jsxs("span",{className:"text-sm font-semibold",children:[r.charger_count||0," Carregador",1!==(r.charger_count||0)?"es":""]})]})]}),e.jsx("button",{onClick:()=>(e=>{e.latitude&&e.longitude&&h([e.latitude,e.longitude])})(r),className:"w-14 bg-emerald-900/30 hover:bg-emerald-600 text-emerald-400 hover:text-white flex items-center justify-center transition-all duration-300 border-l border-emerald-800/30",title:"Ver no mapa",children:e.jsxs("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})]},r.location_id))]}),e.jsx("div",{className:"rounded-lg overflow-hidden border border-emerald-800/30 shadow-2xl shadow-emerald-900/20 bg-gradient-to-br from-zinc-900 to-zinc-800 min-h-[400px]",children:e.jsxs(B,{center:j,zoom:v,style:{height:"100%",width:"100%"},children:[e.jsx(k,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors © <a href="https://carto.com/attributions">CARTO</a>'}),e.jsx(T,{center:x,zoom:v}),o.filter(e=>e.latitude&&e.longitude).map(a=>{const r=(e=>{if(!_)return null;let a="pin-offline";return"online"===e&&(a="pin-online"),"charging"===e&&(a="pin-charging"),_.divIcon({className:"custom-div-icon",html:`<div class="pin ${a}"></div>`,iconSize:[24,24],iconAnchor:[12,24],popupAnchor:[0,-24]})})(a.isConnected?"online":"offline");return r?e.jsx(y,{position:[a.latitude,a.longitude],icon:r,children:e.jsx(z,{children:e.jsxs("div",{className:"text-gray-900 p-2",children:[e.jsx("strong",{className:"block mb-2 text-lg text-emerald-700",children:a.charge_point_id}),e.jsx("p",{className:"text-sm text-gray-700 mb-2",children:a.address}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full "+(a.isConnected?"bg-green-500":"bg-gray-400")}),e.jsx("span",{className:"text-xs font-semibold "+(a.isConnected?"text-green-600":"text-gray-500"),children:a.isConnected?"Online":"Offline"})]})]})})},a.charge_point_id):null})]})})]}),e.jsx("style",{children:"\n        .pin {\n          width: 24px;\n          height: 24px;\n          border-radius: 50% 50% 50% 0;\n          position: absolute;\n          transform: rotate(-45deg);\n          border: 4px solid #ffffff;\n          box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);\n        }\n\n        .pin-online {\n          background-color: #10b981;\n          border-color: #10b981;\n        }\n\n        .pin-offline {\n          background-color: #6b7280;\n          border-color: #6b7280;\n        }\n\n        .pin-charging {\n          background-color: #3b82f6;\n          border-color: #3b82f6;\n        }\n\n        .custom-div-icon {\n          background: transparent;\n          border: none;\n        }\n      "})]})};export{q as Locations};
