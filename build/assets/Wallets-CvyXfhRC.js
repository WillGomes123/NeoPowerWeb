import{j as e}from"./ui-vendor-D6QdPKSZ.js";import{a}from"./react-vendor-BVAhLato.js";import{c as s,f as r,t,W as l,B as d,R as c,C as i,d as n,a as m,b as o}from"./index-BaJa-ZGP.js";import{E as x,a as h,b as j,c as b,d as p,e as u}from"./EnhancedTable-DB0V6gm6.js";import{E as f}from"./ExportButton-DGozts7C.js";import{C as N,a as g}from"./chevron-right-BDIPc-07.js";import"./charts-BaPK5s1M.js";import"./table-KAkNip0H.js";import"./export-B3G8m_WB.js";import"./file-text-D9j_NDks.js";
/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=s("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),w=s("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),v=[{key:"id",header:"ID",format:"number"},{key:"userName",header:"Usuario",format:"text"},{key:"userEmail",header:"Email",format:"text"},{key:"balance",header:"Saldo (R$)",format:"currency"},{key:"updatedAt",header:"Ultima Atualizacao",format:"date"}],k=[{key:"id",header:"ID",format:"number"},{key:"userName",header:"Usuario",format:"text"},{key:"type",header:"Tipo",format:"text"},{key:"amount",header:"Valor (R$)",format:"currency"},{key:"balanceBefore",header:"Saldo Antes",format:"currency"},{key:"balanceAfter",header:"Saldo Depois",format:"currency"},{key:"description",header:"Descricao",format:"text"},{key:"createdAt",header:"Data",format:"date"}],S=()=>{const[s,S]=a.useState([]),[E,C]=a.useState([]),[A,D]=a.useState(!0),[z,T]=a.useState(!0),[B,R]=a.useState(null),[U,M]=a.useState("wallets"),[P,$]=a.useState(1);a.useEffect(()=>{F()},[]);const F=async()=>{await Promise.all([I(),L()])},I=async()=>{D(!0);try{const e=await r.get("/admin/wallets");if(!e.ok)throw new Error("Falha ao buscar carteiras");const a=await e.json();S(a)}catch(e){const a=e instanceof Error?e.message:"Erro desconhecido";R(a),t.error(a)}finally{D(!1)}},L=async()=>{T(!0);try{const e=await r.get("/admin/wallet-transactions");if(!e.ok)throw new Error("Falha ao buscar transacoes");const a=await e.json();C(a)}catch(e){const a=e instanceof Error?e.message:"Erro desconhecido";R(a),t.error(a)}finally{T(!1)}},V=s.reduce((e,a)=>e+a.balance,0),_=E.filter(e=>"deposit"===e.type).reduce((e,a)=>e+a.amount,0),H=E.filter(e=>"charge"===e.type).reduce((e,a)=>e+a.amount,0),q="wallets"===U?s:E,G=Math.ceil(q.length/10),W=10*(P-1),J=W+10,K=e=>e?new Date(e).toLocaleString("pt-BR"):"---",O=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Q=e=>({deposit:"Deposito",withdrawal:"Saque",charge:"Cobranca",refund:"Reembolso"}[e]||e);return A||z?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-zinc-400",children:"Carregando dados..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-emerald-50 flex items-center gap-3",children:[e.jsx(l,{className:"w-8 h-8 text-emerald-400"}),"Carteiras Digitais"]}),e.jsx("p",{className:"text-emerald-300/60 mt-1",children:"Gerencie as carteiras e transacoes dos usuarios"})]}),e.jsxs(d,{onClick:F,variant:"outline",className:"bg-emerald-900/40 border-emerald-700/50 text-emerald-100 hover:bg-emerald-800/60",children:[e.jsx(c,{className:"w-4 h-4 mr-2"}),"Atualizar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(i,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-300/60 text-sm",children:"Saldo Total"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-50",children:O(V)})]}),e.jsx(l,{className:"w-10 h-10 text-emerald-400/50"})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-300/60 text-sm",children:"Total Depositos"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:O(_)})]}),e.jsx(w,{className:"w-10 h-10 text-emerald-400/50"})]})})}),e.jsx(i,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30",children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-300/60 text-sm",children:"Total Cobrado"}),e.jsx("p",{className:"text-2xl font-bold text-orange-400",children:O(H)})]}),e.jsx(y,{className:"w-10 h-10 text-orange-400/50"})]})})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{onClick:()=>{M("wallets"),$(1)},variant:"wallets"===U?"default":"outline",className:"wallets"===U?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-900/40 border-emerald-700/50 text-emerald-100 hover:bg-emerald-800/60",children:[e.jsx(l,{className:"w-4 h-4 mr-2"}),"Carteiras (",s.length,")"]}),e.jsxs(d,{onClick:()=>{M("transactions"),$(1)},variant:"transactions"===U?"default":"outline",className:"transactions"===U?"bg-emerald-600 hover:bg-emerald-700":"bg-emerald-900/40 border-emerald-700/50 text-emerald-100 hover:bg-emerald-800/60",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Transacoes (",E.length,")"]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-emerald-950/40 to-emerald-900/20 border-emerald-800/30 backdrop-blur-sm shadow-2xl shadow-emerald-900/20",children:[e.jsx(m,{className:"border-b border-emerald-800/30 pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-emerald-50 flex items-center gap-2",children:"wallets"===U?e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-5 h-5 text-emerald-400"}),"Carteiras dos Usuarios"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5 text-emerald-400"}),"Historico de Transacoes"]})}),e.jsx("p",{className:"text-sm text-emerald-300/60 mt-1",children:"wallets"===U?`${s.length} carteiras cadastradas`:`${E.length} transacoes realizadas`})]}),e.jsx(f,{data:"wallets"===U?s:E,columns:"wallets"===U?v:k,filename:"wallets"===U?"carteiras_neopower":"transacoes_carteira_neopower",title:"wallets"===U?"Carteiras - NeoPower":"Transacoes de Carteira - NeoPower",disabled:0===q.length})]})}),e.jsxs(n,{className:"pt-6",children:["wallets"===U?e.jsxs(x,{striped:!0,hoverable:!0,children:[e.jsx(h,{children:e.jsxs(j,{hoverable:!1,children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Usuario"}),e.jsx(b,{children:"Email"}),e.jsx(b,{children:"Saldo"}),e.jsx(b,{children:"Ultima Atualizacao"})]})}),e.jsx(p,{children:s.slice(W,J).map((a,s)=>e.jsxs(j,{index:s,children:[e.jsx(u,{className:"font-mono",children:e.jsx("span",{className:"px-2 py-1 rounded bg-emerald-500/10 border border-emerald-500/20 text-emerald-300",children:a.id})}),e.jsx(u,{className:"font-medium",children:a.userName}),e.jsx(u,{className:"text-emerald-300/70",children:a.userEmail}),e.jsx(u,{highlight:!0,children:e.jsx("span",{className:a.balance>0?"text-emerald-400":"text-zinc-400",children:O(a.balance)})}),e.jsx(u,{className:"text-sm",children:K(a.updatedAt)})]},a.id))})]}):e.jsxs(x,{striped:!0,hoverable:!0,children:[e.jsx(h,{children:e.jsxs(j,{hoverable:!1,children:[e.jsx(b,{children:"ID"}),e.jsx(b,{children:"Usuario"}),e.jsx(b,{children:"Tipo"}),e.jsx(b,{children:"Valor"}),e.jsx(b,{children:"Saldo Anterior"}),e.jsx(b,{children:"Saldo Atual"}),e.jsx(b,{children:"Descricao"}),e.jsx(b,{children:"Data"})]})}),e.jsx(p,{children:E.slice(W,J).map((a,s)=>{return e.jsxs(j,{index:s,children:[e.jsx(u,{className:"font-mono",children:e.jsx("span",{className:"px-2 py-1 rounded bg-emerald-500/10 border border-emerald-500/20 text-emerald-300",children:a.id})}),e.jsx(u,{className:"font-medium",children:a.userName}),e.jsx(u,{children:e.jsx("span",{className:`font-medium ${r=a.type,{deposit:"text-emerald-400",withdrawal:"text-red-400",charge:"text-orange-400",refund:"text-blue-400"}[r]||"text-zinc-400"}`,children:Q(a.type)})}),e.jsx(u,{highlight:!0,children:e.jsxs("span",{className:"deposit"===a.type||"refund"===a.type?"text-emerald-400":"text-orange-400",children:["deposit"===a.type||"refund"===a.type?"+":"-",O(a.amount)]})}),e.jsx(u,{className:"text-emerald-300/70",children:O(a.balanceBefore)}),e.jsx(u,{className:"text-emerald-300/70",children:O(a.balanceAfter)}),e.jsx(u,{className:"text-sm text-emerald-300/70 max-w-[200px] truncate",children:a.description||"---"}),e.jsx(u,{className:"text-sm",children:K(a.createdAt)})]},a.id);var r})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-emerald-800/30",children:[e.jsxs("div",{className:"text-sm text-emerald-300/70",children:["Pagina ",P," de ",G||1," (",q.length," itens)"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.max(1,e-1)),disabled:1===P,className:"bg-emerald-900/40 border-emerald-700/50 text-emerald-100 hover:bg-emerald-800/60 hover:border-emerald-600 disabled:opacity-30",children:[e.jsx(N,{className:"w-4 h-4 mr-1"}),"Anterior"]}),e.jsxs(d,{size:"sm",variant:"outline",onClick:()=>$(e=>Math.min(G,e+1)),disabled:P===G||0===G,className:"bg-emerald-900/40 border-emerald-700/50 text-emerald-100 hover:bg-emerald-800/60 hover:border-emerald-600 disabled:opacity-30",children:["Proxima",e.jsx(g,{className:"w-4 h-4 ml-1"})]})]})]})]})]})]})};export{S as Wallets};
